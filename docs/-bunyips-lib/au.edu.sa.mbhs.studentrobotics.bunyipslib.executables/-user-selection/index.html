<!DOCTYPE html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>UserSelection</title>
    <link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "../../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="../../../scripts/prism.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
<link href="../../../images/logo-icon.svg">
</head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
                    <a class="library-name--link" href="../../../index.html">
                            BunyipsLib
                    </a>
            </div>
            <div class="library-version">
v7.0.6-master-e8f3c03f7            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":BunyipsLib:dokkaHtml/release">BunyipsLib</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" data-page-type="classlike" id="content" pageIds="BunyipsLib::au.edu.sa.mbhs.studentrobotics.bunyipslib.executables/UserSelection///PointingToDeclaration//-325384828">
  <div class="breadcrumbs"><a href="../../../index.html">BunyipsLib</a><span class="delimiter">/</span><a href="../index.html">au.edu.sa.mbhs.studentrobotics.bunyipslib.executables</a><span class="delimiter">/</span><span class="current">UserSelection</span></div>
  <div class="cover ">
    <h1 class="cover"><span>User</span><wbr></wbr><span><span>Selection</span></span></h1>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">class </span><a href="index.html">UserSelection</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt;</span> <span><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/java/lang/SafeVarargs.html"><span class="token annotation builtin">SafeVarargs</span></a> </span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">callback<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/java/util/function/Consumer.html">Consumer</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">selections<span class="token operator">: </span><a href="index.html">T</a></span></span><span class="token punctuation">)</span> : <a href="https://developer.android.com/reference/kotlin/java/util/concurrent/Callable.html">Callable</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">&gt; </span></div><p class="paragraph">Callable thread-friendly operation to ask for user input from a controller in order to determine a pre-determined set of instructions before a <a href="../../au.edu.sa.mbhs.studentrobotics.bunyipslib/-bunyips-op-mode/index.html">BunyipsOpMode</a> starts (during <code class="lang-kotlin">dynamic_init</code>).</p><p class="paragraph">You really should only be running one of these at a time, preferably using the Threads class to start and manage it to allow for logging, OpMode management, and parallelization. <a href="../../au.edu.sa.mbhs.studentrobotics.bunyipslib/-autonomous-bunyips-op-mode/index.html">AutonomousBunyipsOpMode</a> handles the propagation of a user selection fully automatically and re-exposes it through <code class="lang-kotlin">onReady</code>. Note you area ble to call this UserSelection manually via <a href="call.html">call</a>, but be warned as this will block your thread until completion. During init, this may not matter, so pick whichever method you wish.</p><p class="paragraph">Keep in mind a thread runs in the background so it is not guaranteed to be ready during any specific phase of your init-cycle. It is recommended to check if this thread is running using <code class="lang-kotlin">Threads.isRunning(selector)</code> in your <code class="lang-kotlin">onInitLoop()</code> to ensure BOM knows it has to wait for the user to make a selection. Alternatively, you can set an init-task that simply waits for the thread to die or similar (e.g. <code class="lang-kotlin">Task.waitFor(() -&gt; !Threads.isRunning(...))</code>). You can also alternatively use the init branch of this task to initialise the user selection. <code class="lang-kotlin">onReady</code> of <a href="../../au.edu.sa.mbhs.studentrobotics.bunyipslib/-autonomous-bunyips-op-mode/index.html">AutonomousBunyipsOpMode</a> handles this. If you do not implement a waiting action, the OpMode will assume it is ready to run regardless.</p><p class="paragraph">The result of this thread will be stored in the <a href="https://developer.android.com/reference/kotlin/java/util/concurrent/Future.html">Future</a> getter, which you can access yourself, or you can attach a callback to the <code class="lang-kotlin">callback</code> property to be run once the thread is complete. This callback will still be run if the OpMode moves to a running state without a selection. In the event a user does not make a selection, the callback result and <code class="lang-kotlin">result</code> property will be null or an array of nulls if chaining is used.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// In Kotlin using a lambda function, String can be replaced with any type<br>private val selector: UserSelection&lt;String&gt; = UserSelection({ if (it == &quot;POV&quot;) initPOVDrive() else initFCDrive() }, &quot;POV&quot;, &quot;FIELD-CENTRIC&quot;)<br><br>override fun onInit() {<br>  Threads.start(&quot;drive selector&quot;, selector)<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// In Java using a callback, String can be replaced with any type<br>private UserSelection&lt;String&gt; selector = new UserSelection&lt;&gt;(this::callback, &quot;POV&quot;, &quot;FIELD-CENTRIC&quot;);<br><br>@Override<br>protected void onInit() {<br>  Threads.start(&quot;drive selector&quot;, selector);<br>}<br><br>private void callback(@Nullable String res) {<br>  // Do something with res<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">New feature as of BunyipsLib v7.0.0: Passing in multiple <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-array/index.html">Array</a> or <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.collections/-collection/index.html">Collection</a> instances, effectively passing in a type <a href="index.html">T</a> of <code class="lang-kotlin">Array&lt;*&gt;</code>/<code class="lang-kotlin">Collection&lt;*&gt;</code> will activate chaining mode. Chaining mode will prompt the user to select sequentially given the options in each sub-array, allowing you to compose and piece together separate selections. The callback, which will be of <code class="lang-kotlin">Array&lt;*&gt;</code> or <code class="lang-kotlin">Collection&lt;*&gt;</code> will return the selections made for each section. Null values will fill the array at the point the selection is terminated early, hence the return type is still <code class="lang-kotlin">T?</code>. Chaining <code class="lang-kotlin">Array</code> with <code class="lang-kotlin">Collection</code> instances will not trigger chaining. All elements of T must conform with either a vararg of arrays (primitive arrays will be autoboxed), or vararg of collections (including <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.collections/-list/index.html">List</a> and <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.collections/-set/index.html">Set</a>). You can choose to disable chaining behaviour by calling <a href="disable-chaining.html">disableChaining</a>.</p><p class="paragraph">This class is currently only supported for use in a <a href="../../au.edu.sa.mbhs.studentrobotics.bunyipslib/-bunyips-op-mode/index.html">BunyipsOpMode</a> context as it references several of its internal components.</p><span class="kdoc-tag"><h4 class="">Author</h4><p class="paragraph">Lucas Bubner, 2023</p></span><span class="kdoc-tag"><h4 class="">Since</h4><p class="paragraph">1.0.0-pre</p></span><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>selections</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Modes to map to buttons. Will be cast to strings for display and return back in type <code class="lang-kotlin">T</code>.</p></div></div></div></div></div></div></div>
  </div>
  <div class="tabbedcontent">
    <div class="tabs-section" tabs-section="tabs-section"><button class="section-tab" data-active="" data-togglable="CONSTRUCTOR,TYPE,PROPERTY,FUNCTION">Members</button></div>
    <div class="tabs-section-body">
      <div data-togglable="CONSTRUCTOR">
        <h2 class="">Constructors</h2>
        <div class="table"><a data-name="-987461983%2FConstructors%2F-325384828" anchor-label="UserSelection" id="-987461983%2FConstructors%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-togglable="CONSTRUCTOR" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="-user-selection.html"><span>User</span><wbr></wbr><span><span>Selection</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-987461983%2FConstructors%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/java/lang/SafeVarargs.html"><span class="token annotation builtin">SafeVarargs</span></a></div></div><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">callback<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/java/util/function/Consumer.html">Consumer</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter "><span class="token keyword">vararg </span>selections<span class="token operator">: </span><a href="index.html">T</a></span></span><span class="token punctuation">)</span></div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="TYPE">
        <h2 class="">Types</h2>
        <div class="table"><a data-name="-1617814517%2FClasslikes%2F-325384828" anchor-label="Companion" id="-1617814517%2FClasslikes%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="-companion/index.html"><span><span>Companion</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1617814517%2FClasslikes%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">object </span><a href="-companion/index.html">Companion</a></div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="PROPERTY">
        <h2 class="">Properties</h2>
        <div class="table"><a data-name="1870678396%2FProperties%2F-325384828" anchor-label="captionLayers" id="1870678396%2FProperties%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="caption-layers.html"><span>caption</span><wbr></wbr><span><span>Layers</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1870678396%2FProperties%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.jvm/-jvm-field/index.html"><span class="token annotation builtin">JvmField</span></a></div></div><span class="token keyword">val </span><a href="caption-layers.html">captionLayers</a><span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.collections/-mutable-map/index.html">MutableMap</a><span class="token operator">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-int/index.html">Int</a><span class="token punctuation">, </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-string/index.html">String</a><span class="token operator">&gt;</span></div><div class="brief "><p class="paragraph">The captions used which are appended after the text &quot;ACTION REQUIRED: &quot; on the DS.</p></div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-togglable="FUNCTION">
        <h2 class="">Functions</h2>
        <div class="table"><a data-name="340574136%2FFunctions%2F-325384828" anchor-label="call" id="340574136%2FFunctions%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="call.html"><span><span>call</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="340574136%2FFunctions%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">open </span><span class="token keyword">override </span><span class="token keyword">fun </span><a href="call.html"><span class="token function">call</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">T</a><span class="token operator">?</span></div><div class="brief "><p class="paragraph">Maps a set of operation modes to a set of buttons, then blocks until the user inputs an option via <code class="lang-kotlin">gamepad1</code>.</p></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="21876654%2FFunctions%2F-325384828" anchor-label="captionLayer" id="21876654%2FFunctions%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="caption-layer.html"><span>caption</span><wbr></wbr><span><span>Layer</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="21876654%2FFunctions%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">fun </span><a href="caption-layer.html"><span class="token function">captionLayer</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">layer<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-int/index.html">Int</a><span class="token punctuation">, </span></span><span class="parameter ">caption<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-string/index.html">String</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">UserSelection</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">&gt;</span></div><div class="brief "><p class="paragraph">Chaining utility to add a layering caption to <a href="caption-layers.html">captionLayers</a>, which will display the given caption on the desired selection layer. Since this string will be added to telemetry, if HTML is available for telemetry you can use HTML here for formatting.</p></div></div></div>
                </div>
              </div>
            </div>
          </div>
<a data-name="413911323%2FFunctions%2F-325384828" anchor-label="disableChaining" id="413911323%2FFunctions%2F-325384828" data-filterable-set=":BunyipsLib:dokkaHtml/release"></a>
          <div class="table-row" data-filterable-current=":BunyipsLib:dokkaHtml/release" data-filterable-set=":BunyipsLib:dokkaHtml/release">
            <div class="main-subrow keyValue ">
              <div class=""><span class="inline-flex">
                  <div><a href="disable-chaining.html"><span>disable</span><wbr></wbr><span><span>Chaining</span></span></a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="413911323%2FFunctions%2F-325384828"></span>
                    <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                  </span></span></div>
              <div>
                <div class="title">
                  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":BunyipsLib:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">fun </span><a href="disable-chaining.html"><span class="token function">disableChaining</span></a><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">UserSelection</a><span class="token operator">&lt;</span><a href="index.html">T</a><span class="token operator">&gt;</span></div><div class="brief "><p class="paragraph">Disables user selection chaining when passing in sets of <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-array/index.html">Array</a> or <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin.collections/-collection/index.html">Collection</a> instances.</p></div></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2025 Lucas Bubner, Murray Bridge High School Student Robotics Club</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>
